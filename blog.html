<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIU Forum</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="blog.css">
    <link rel="icon" type="image/x-icon" href="assets/diu-logo.png">
</head>

<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand-card">
                <div class="nav-brand">
                    <i class="fas fa-graduation-cap"></i>
                    <span>DIU Forum</span>
                </div>
            </div>
            <div class="nav-menu-card">
                <div class="nav-menu">
                    <ul class="nav-links">
                        <li class="nav-item"><a class="active" href="blog.html">Feeds</a></li>
                        <li class="nav-item"><a href="jobs.html">Jobs</a></li>
                        <li class="nav-item"><a href="studies.html">H. Studies</a></li>
                    </ul>
                </div>
            </div>
            <div class="user-menu-card">
                <div class="user-menu">
                    <div class="user-profile" onclick="toggleDropdown()"
                        style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                        <span id="userName">Guest User</span>
                        <img id="navUserAvatarImg" alt="User"
                            style="width:28px;height:28px;border-radius:50%;object-fit:cover;display:none;" />
                        <i id="navUserIcon" class="fas fa-user-circle" style="font-size:24px;line-height:1;"></i>
                    </div>
                    <div class="dropdown" id="userDropdown">
                        <div id="dropdownLogin">
                            <a href="#" class="sign-in-btn"><i class="fas fa-sign-in-alt"></i>Login</a>
                        </div>
                        <div id="dropdownLogout" style="display:none;">
                            <a href="#" class="sign-out-btn"><i class="fas fa-sign-out-alt"></i>Logout</a>
                        </div>
                        <a href="settings.html"><i class="fas fa-cog"></i>Settings</a>
                        <a href="settings.html#help"><i class="fas fa-info-circle"></i>Help</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="blog-layout">
        <!-- Left Sidebar -->
        <aside class="left-sidebar">
            <!-- User Profile Card -->
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar" id="userAvatar"
                        style="position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;">
                        <img id="userAvatarImg" alt="Profile"
                            style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:none;" />
                        <span id="userAvatarLetter">U</span>
                    </div>
                    <div class="profile-info">
                        <h3 id="profileName">User Name</h3>
                        <p id="profileType">Student</p>
                        <p id="profileDepartment">Computer Science</p>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="quick-links-card">
                <h4>Quick Links</h4>
                <ul class="quick-links">
                    <li><a href="https://skill.jobs/browse-jobs"><i class="fas fa-briefcase"></i>Skill Jobs</a></li>
                    <li><a href="https://daffodilvarsity.edu.bd/"><i class="fas fa-graduation-cap"></i>DIU Official
                            Site</a></li>
                    <li><a href="https://daffodilvarsity.edu.bd/noticeboard"><i class="fas fa-calendar"></i>DIU Notice
                            Board</a></li>
                    <li><a href="#"><i class="fas fa-users"></i>Student Portal</a></li>
                    <li><a href="https://teacherportal.diu.edu.bd/"><i class="fa-solid fa-chalkboard-user"></i>Teacher
                            Portal</a></li>
                    <li><a href="#"><i class="fas fa-question-circle"></i> Help Center</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Create Post Section -->
            <div class="create-post-card">
                <div class="create-post-header">
                    <div class="user-avatar-small" id="createPostAvatar">U</div>
                    <button class="create-post-btn" id="newPostBtn">
                        <span>What's on your mind?</span>
                    </button>
                </div>
                <div class="create-post-actions">
                    <button class="action-item" id="newPostBtn2">
                        <i class="fas fa-edit"></i>
                        <span>Write Post</span>
                    </button>
                    <button class="action-item">
                        <i class="fas fa-image"></i>
                        <span>Photo</span>
                    </button>
                    <button class="action-item">
                        <i class="fas fa-video"></i>
                        <span>Video</span>
                    </button>
                </div>
            </div>

            <!-- Posts Feed -->
            <div class="posts-feed" id="postsContainer">
                <div class="loading" id="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading posts...</p>
                </div>
            </div>
        </main>

        <!-- Post Card Template (used by posts.js) -->
        <template id="postTemplate">
            <article class="post-card">
                <div class="post-header">
                    <div class="author-info">
                        <div class="author-avatar" data-author-avatar>U</div>
                        <div class="author-details">
                            <div class="author-name">
                                <span data-author-name></span><span class="author-meta" data-author-meta
                                    style="display:none;"></span>
                            </div>
                            <div class="post-time" data-post-time></div>
                        </div>
                    </div>
                </div>
                <h4 class="post-title" data-post-heading style="display:none;"></h4>
                <div class="post-content" data-post-content></div>
                <div class="post-attachments" data-post-attachments style="display:none;"></div>
            </article>
        </template>
        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <!-- Trending Topics -->
            <div class="trending-card">
                <h4>Trending Topics</h4>
                <div class="trending-list">
                    <div class="trending-item">
                        <span class="trending-tag">#WebDevelopment</span>
                        <small>245 posts</small>
                    </div>
                    <div class="trending-item">
                        <span class="trending-tag">#CareerTips</span>
                        <small>189 posts</small>
                    </div>
                    <div class="trending-item">
                        <span class="trending-tag">#DIUEvents</span>
                        <small>156 posts</small>
                    </div>
                    <div class="trending-item">
                        <span class="trending-tag">#Internships</span>
                        <small>134 posts</small>
                    </div>
                    <div class="trending-item">
                        <span class="trending-tag">#StudyAbroad</span>
                        <small>98 posts</small>
                    </div>
                </div>
            </div>

            <!-- Upcoming Events -->
            <div class="events-card">
                <h4>Upcoming Events</h4>
                <div class="events-list">
                    <div class="event-item">
                        <div class="event-date">
                            <span class="day">15</span>
                            <span class="month">Jan</span>
                        </div>
                        <div class="event-info">
                            <h5>Tech Talk: AI in Education</h5>
                            <p>2:00 PM - Auditorium</p>
                        </div>
                    </div>
                    <div class="event-item">
                        <div class="event-date">
                            <span class="day">20</span>
                            <span class="month">Jan</span>
                        </div>
                        <div class="event-info">
                            <h5>Career Fair 2024</h5>
                            <p>10:00 AM - Main Campus</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer Links -->
            <div class="footer-links">
                <div class="links-section">
                    <a href="#">About</a>
                    <a href="#">Privacy</a>
                    <a href="#">Terms</a>
                    <a href="#">Help</a>
                </div>
                <p>&copy; 2025 DIU Forum</p>
            </div>
        </aside>
    </div>
    <!-- Post Creation Modal -->
    <div id="postModal"
        style="display:none;position:fixed;inset:0;backdrop-filter:blur(2px);background:rgba(0,0,0,.45);z-index:1000;align-items:center;justify-content:center;">
        <div
            style="background:#fff;min-width:360px;max-width:560px;width:90%;padding:22px 24px 26px;border-radius:14px;box-shadow:0 8px 30px -4px rgba(0,0,0,.25);font-family:system-ui,sans-serif;position:relative;">
            <h3 style="margin:0 0 4px;">Create Post</h3>
            <div id="postUserInfo" style="font-size:13px;color:#555;margin-bottom:14px;">Signed in as <span
                    id="postAuthorName"></span></div>
            <div style="display:flex;flex-direction:column;gap:14px;">
                <div style="display:flex;flex-direction:column;gap:6px;">
                    <label for="postHeading" style="font-size:13px;font-weight:600;color:#374151;">Heading<span
                            style="color:#dc2626;"> *</span></label>
                    <input id="postHeading" type="text" maxlength="120" placeholder="Concise, descriptive title"
                        style="padding:10px 12px;border:1px solid #cbd5e1;border-radius:8px;font:inherit;font-size:14px;" />
                </div>
                <div style="display:flex;flex-direction:column;gap:6px;">
                    <label for="postContent" style="font-size:13px;font-weight:600;color:#374151;">Main Post<span
                            style="color:#dc2626;"> *</span></label>
                    <textarea id="postContent" rows="6" placeholder="Share something with the community..."
                        style="width:100%;resize:vertical;padding:10px 12px;border:1px solid #cbd5e1;border-radius:8px;font-family:inherit;font-size:14px;line-height:1.4;"></textarea>
                </div>
                <div
                    style="border:1px dashed #cbd5e1;border-radius:10px;padding:14px 14px 10px;display:flex;flex-direction:column;gap:10px;">
                    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
                        <button id="addPhotoBtn"
                            style="background:#f1f5f9;border:1px solid #d1d5db;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:13px;display:flex;align-items:center;gap:6px;">
                            <i class="fas fa-image" style="color:#2563eb;"></i> Photo(s)
                        </button>
                        <button id="addVideoBtn"
                            style="background:#f1f5f9;border:1px solid #d1d5db;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:13px;display:flex;align-items:center;gap:6px;">
                            <i class="fas fa-video" style="color:#2563eb;"></i> Video(s)
                        </button>
                        <span style="font-size:11px;color:#64748b;">(Preview & uploads coming soon)</span>
                    </div>
                    <input id="postImages" type="file" accept="image/*" multiple style="display:none;" />
                    <input id="postVideos" type="file" accept="video/*" multiple style="display:none;" />
                    <div id="attachmentList"
                        style="display:none;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:8px 10px;max-height:140px;overflow:auto;font-size:12px;line-height:1.4;">
                    </div>
                </div>
            </div>
            <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:18px;">
                <button id="cancelPostBtn"
                    style="background:#f1f5f9;border:1px solid #d1d5db;padding:8px 16px;border-radius:8px;cursor:pointer;font-weight:500;">Cancel</button>
                <button id="submitPostBtn"
                    style="background:#2563eb;color:#fff;border:0;padding:8px 18px;border-radius:8px;font-weight:600;cursor:pointer;">Post</button>
            </div>
            <div id="postError" style="color:#c00;font-size:13px;margin-top:10px;display:none;"></div>
            <div id="profileIncompleteMsg"
                style="display:none;margin-top:12px;font-size:12px;color:#b45309;background:#fff7ed;border:1px solid #fed7aa;padding:8px 10px;border-radius:8px;">
                Complete your profile (Display Name, Role, Department, Institution) in <a href="settings.html"
                    style="color:#c2410c;font-weight:600;">Settings</a> to post.</div>
        </div>
    </div>
    <script type="module" src="auth.js"></script>
    <script type="module" src="posts.js"></script>
</body>

</html>